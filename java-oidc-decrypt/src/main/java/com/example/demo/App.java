package com.example.demo;

import org.jose4j.jwk.JsonWebKey;
import org.jose4j.jwk.RsaJsonWebKey;
import org.jose4j.jwe.JsonWebEncryption;

public class App {
	private static final String ID_TOKEN = "eyJhbGciOiJSU0EtT0FFUCIsImN0eSI6IkpXVCIsImVuYyI6IkExMjhDQkMtSFMyNTYifQ.rEtBkxZtE7mdfrrGLR2jlj9TMVJ5f4KRGv3ZyT8hY_pE-gkoESyYz_5vlPEpftgxlp-0rXfBY1H1SlPaTVulC-cJzs_VHA-9zofvW-1DQXWINmJtQXvQ1RbK7JaMcM5Lr9tur2ZL_LCMyqkCoNle2hAP3LhLfyt5U5R3SCjk7Wu2gcheJVdF4tp_wDk0qouV3LIMy2Fm8sJD1IuOf_7-vgc3mpWU_8ukmfA9ouPRaZ3sEpjOXgSUYHlHKNqwO-9LyVc99Ev0Cy-MUZcC7U3WH_Jo5Gtm1Ofam6D3sfDnq7C6KQKJCH1jqEofNaJ8_1IYj_iJE6NL_E5gyX5xatvfKw.Iv_KTPBjBqvbDRozA8Grqw.HGAdpRwLPTf4Kgg-CJOy0qLHOuCIQSRoTdq38eakn-IF2jSdqhgXcqUwPTfg29Wfp9bTo31oeshVOOePuzilrk-T2wTMd2HjGFqso5a9ttNUh0krr5DbNago-Dg8X0mnzT6xY_exty0PwUkUDD0_aLrO5pObb91C8x093bKogt3ZpHMk6QOW2lU3MDHjLCe8-Ic6_TKPahqCAnaJ98E2_8q9-_l0JU59LP1CGdtp-SS_E80LcGFArUMnQvJilzEUiS2XbKZfzbXatOjCzNVcvvmVQLcrGLA7vgsKWObeL7osKIrSjQVhbYdPImm9VH9AyoYYIiyUqoOaXi2aip6DJu5StArcmbhLJFm6EgNGuDEu6Tq-Z_55TyUDu1vPzsPOzCZeDx8ZSmOAd3N_-IC2hf4beC08Rkstj9_IONrh5UDPksDdZmOCCs4P3Yt5InejLEzZK1latKz63xHGitzRyP0uS3BGaf3wHeT5K3jWN4pir9W7hvhkeiGm7QdMpXBt2sxAwKstZn5d089OAevoC7p80GY1opwEwM_QDG7jXBw.3NlJsdxCmjduRC-YAFkBJA";

	private static final String ENC_KEY = """
{"d":"LDCH36vm47sBnYNwAcj1IanBa9XMWzq-6n45rxfruFyrBvXtMe4mbaVIOVW3g1wTOJSsn6vg_ifmRDRrTOHb3QS3feqLsGZDglyWprFH48LDfulAPaoQeLQwpaaoPIzA3_7KrDF0jGTSP1cbYlPlhkQ88aTjBtHQ6M5uvb9yGlq6q5_-AaHJlQD1o5KXMdtfLzEUacPNLxoGd80GHXP7Lo3lqxHFVYjYYw-WPsJieIL5BsDzsZZCGX7_GJYrBgfRaf8GqzkvylIgF_ucjf_jFkFLgjwPUvf0WmK88ocr7RDpM5W3mKC_EeNoFACugkmpYS89h4GZRxhIxxYpngEAMQ","dp":"GD2p8GOy1aX5dxrylFtpJ17c9BzyRCMB0lU_xLY7iFNB8lP4FYy5Kq_EyXOVMKXUWJeKf9W3SoqzoynMR1QLCeVRf8qNBbejtF4j4zlKWz1JEJBa3Si2Fv3VbvqUBL4wfr6Za7cPSdGivtZPxAC7UajMYEjCHgCJ0_kSoAWugkc","dq":"SFyQ3MCUFcbEsfsBanZSIU5glaDbwlpeSYbKgTDo1pGGD0xM7xy1vJ3tgwhe1bZ_YI9cROZeJ_hVx8P80znlfgGuqYqfnXykzw2wMpgGIbzGKUGqmF8j0TOe0HHw3YTIFC9Y8bTDJweOImDVHd0Lfai5wII-_1DWzSbPBVxeGDk","e":"AQAB","kty":"RSA","n":"t3T9YErVeSvGZ-9aiuWtubr3TRUeFTJ4J6cRwz69e5yMTXemnDDJR-aqxiMbbIycJZ8beh8VFSD99VckP-nTzpSOGk3umS8f9RqUZ8l8-_0iPqyZVFU0r1kNfWkE0dzdZ8AVdGgwfHAy7HbhspntrXO-UdPmocsg5eFPbu036aQKfqLd0lkkWvRR-al3PdFMZ8B_smNjPnI1AXu6bBFY22PqxxddsG8DsNxdkc5JjzL8cJquoy8coXPhqZEm3ja9vJVKsiT__xj8ix53BZ9EaZnYum7C4f9j15BAk0whf1Bc8415wf06GP3YAyF9x2BYw-TUEx4GAykT6MkO6RiK-w","p":"20dY3mJGFLwXN7zIQKmEx7ZfuIy3WtHjAJFe31C_msI1jYM2XPV10gb6SJcvQCskukfWtP30fXAflZ9gC1GHt-4HUXLCtCjlrQdSxEpmazFfkzgga4s6QaYxtZXjx2aw6yfmE09KjU0Dp_u14P5iz0cPMmRdYZUSNydrWaeull8","q":"1i3v97E0crm1yETaz7En4jkLWouLCEeZAb8pgaWEp0GbytfiKfcJtD5dkZWDzgW_SiRzwlZJMJCia6MYwZMwcUulBfUlNPqXr76Bcs-EudqVxWcyx5NeO2u7gk88di4Ul1A6d-RO2UDUHGI5AeXi2XSmsDNrwBW23D8hC5_A-OU","qi":"kL_g6ACh8R72qmV8bDU6U4zZPnmf4ZNpVILEWePy2hhos5IsF4APmMzb2vSdbPpFKDm3Q3Mc2Tq24ab9KHwIcfuxOR-nYflXjQqBLHJL5zGQMSx1OratQ5dGImkyViWw2hvzRp9HJCWEgSvA0QrpibixR5usmk2wwe1emcOfji8"}
""";

	public static void main(String[] args) throws Exception {
		var jwk = (RsaJsonWebKey) JsonWebKey.Factory.newJwk(ENC_KEY);
		var decryption = new JsonWebEncryption();
		decryption.setCompactSerialization(ID_TOKEN);
		decryption.setKey(jwk.getRsaPrivateKey());
		var plaintext = decryption.getPlaintextString();
		System.out.printf("%s\n", plaintext);
	}
}
